},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
stop()
},
error = function(e){continue <- F})
}
for (i in 1:length(text.chunks)) {
continue <- F
while (continue == F) {
continue <- T
tryCatch({
old <- ngram(text.chunks[[i]], year_start = target.year-1, year_end = target.year) %>% as_tibble()
new <- ngram(text.chunks[[i]], year_start = 2018, year_end = 2019) %>% as_tibble()
},
error = function(e){continue <- F})
}
stats <- rbind(stats, new, old)
print(i/length(text.chunks))
}
filter(stats, Year == target.year | Year == max(Year))
toc()
stats
filter(stats, Year == target.year | Year == max(Year))
stats <- filter(stats, Year == target.year | Year == max(Year))
#get the data for common words
common.stats <- filter(common, Phrase %in% text.common & (Year == target.year | Year == max(Year)))
common.stats
stats <- rbind(stats, common.stats) %>% arrange(Frequency) %>% distinct()
stats
stats <- rbind(stats, common.stats) %>% arrange(Phrase, Year) %>% distinct
stats
common.stats
rbind(stats, common.stats)
rbind(stats, common.stats) %>% arrange(Phrase, Year)
stats
common.stats
stats
rbind(stats, common.stats)
rbind(stats, common.stats) %>% arrange(Phrase, Year)
rbind(stats, common.stats) %>% arrange(Phrase)
stats <- rbind(stats, common.stats) %>% distinct()
stats$Phrase <- as.character(stats$Phrase)
arrange(stats, Phrase)
arrange(stats, Phrase, Year)
stats <- arrange(stats, Phrase, Year)
stats %>% group_by(Phrase) %>% filter(Year == target.year | Year == max(Year))
sus.ratio[Year == min(Year)]
sus.ratio <- stats %>% group_by(Phrase) %>% filter(Year == target.year | Year == max(Year))
sus.ratio[Year == min(Year)]
filter(sus.ratio, Year == min(Year))
filter(sus.ratio, Year == min(Year)) %>% select(Year)
filter(sus.ratio, Year == min(Year)) %>% ungroup() %>% select(Year)
filter(sus.ratio, Year == min(Year)) %>% ungroup() %>% select(Year) <- "Before"
sus.ratio[sus.ratio$Year == min(sus.ratio$Year)]
sus.ratio[sus.ratio$Year == min(sus.ratio$Year),]
sus.ratio[sus.ratio$Year == min(sus.ratio$Year),"Year"]
sus.ratio[sus.ratio$Year == min(sus.ratio$Year),"Year"] <- "Before"
sus.ratio$Year <- as.character(sus.ratio$Year)
sus.ratio[as.numeric(sus.ratio$Year) == min(as.numeric(sus.ratio$Year)),"Year"]
sus.ratio[as.numeric(sus.ratio$Year) == min(as.numeric(sus.ratio$Year)),"Year"] <- "Before"
sus.ratio <- stats %>% group_by(Phrase) %>% filter(Year == target.year | Year == max(Year))
sus.ratio$Year <- as.character(sus.ratio$Year)
sus.ratio[as.numeric(sus.ratio$Year) == min(as.numeric(sus.ratio$Year)),"Year"] <- "Old"
sus.ratio[as.numeric(sus.ratio$Year) == max(as.numeric(sus.ratio$Year)),"Year"] <- "Modern"
sus.ratio <- stats %>% group_by(Phrase) %>% filter(Year == target.year | Year == max(Year))
sus.ratio$Year_name <- as.character(sus.ratio$Year)
sus.ratio[sus.ratio$Year == min(sus.ratio$Year),"Year_name"]
View(sus.ratio)
sus.ratio[sus.ratio$Year == min(sus.ratio$Year),"Year_name"] <- "Old"
sus.ratio[sus.ratio$Year == max(sus.ratio$Year),"Year_name"] <- "Modern"
sus.ratio %>% pivot_wider(names_from = "Year_name", values_from = Frequency)
sus.ratio %>% select(-Year) %>% pivot_wider(names_from = "Year_name", values_from = Frequency)
sus.ratio <- sus.ratio %>% select(-Year) %>% pivot_wider(names_from = "Year_name", values_from = Frequency)
sus.ratio <- sus.ratio %>% mutate(Ratio = Old/Modern) %>% arrange(Ratio)
library(esquisse)
esquisser(sus.ratio)
ggram("options")
ggram("everyone")
ggrams("inside")
ggram("inside")
ggram("within")
ggram("thor")
ggram("guardians")
ggram("stock")
ggram("threat")
ggram("danger")
?ngram
ggram("concentration")
ggram("focus")
ggram("attention")
